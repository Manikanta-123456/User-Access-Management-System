<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="jakarta.servlet.http.HttpSession" %>
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pending Requests</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<%
    HttpSession session = request.getSession(false);
    String role = session != null ? (String) session.getAttribute("role") : null;
    if (role == null || !"Manager".equals(role)) {
%>
    <h3>Access Denied - Managers only</h3>
    <p><a href="<%=request.getContextPath()%>/login">Login</a></p>
<%
        return;
    }
%>

    <h2>Pending Requests</h2>

    <c:if test="${not empty error}">
        <div class="error">${error}</div>
    </c:if>

    <table border="1" cellpadding="8" cellspacing="0">
        <thead>
            <tr>
                <th>ID</th><th>Employee</th><th>Software</th><th>Access Type</th><th>Reason</th><th>Action</th>
            </tr>
        </thead>
        <tbody>
            <%= request.getAttribute("pendingTable") != null ? request.getAttribute("pendingTable") : "<tr><td colspan='6'>No pending requests</td></tr>" %>
        </tbody>
    </table>

    <p><a href="<%=request.getContextPath()%>/">Home</a></p>
</body>
</html>
